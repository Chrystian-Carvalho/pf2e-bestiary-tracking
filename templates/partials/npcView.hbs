<div class="monster-container">
    <div class="left-monster-container flexcol">
        <div class="monster-image-container">
            <img class="monster-image {{#if this.useTokenArt}}token{{/if}}" src="{{this.creatureData.img}}" data-action="imagePopout" />
            {{!-- {{#if this.isUnlinked}}<i class="fa-solid fa-link-slash unlinked-icon primary-hover-container" data-action="unlinkedDialog"></i>{{/if}} --}}
        </div>
        {{#if this.optionalFields.height}}
            {{> "modules/pf2e-bestiary-tracking/templates/partials/toggleInputSection.hbs" icon="fa-solid fa-up-down" title="PF2EBestiary.Bestiary.NPC.Height" editMode=this.npcState.editMode path="npc.npcData.general.height" data=this.general.height }}
        {{/if}}
        {{#if this.optionalFields.weight}}
            {{> "modules/pf2e-bestiary-tracking/templates/partials/toggleInputSection.hbs" icon="fa-solid fa-left-right" title="PF2EBestiary.Bestiary.NPC.Weight" editMode=this.npcState.editMode path="npc.npcData.general.weight" data=this.general.weight }}
        {{/if}}
        <div class="flexcol flex1 data-section primary-container active">
            <div class="data-header primary-container">
                <div class="data-header-label">
                    <i class="fa-solid fa-chart-column"></i>
                    <div class="flex-value">{{localize "PF2EBestiary.Bestiary.NPC.Dispositions"}}</div>
                </div>
            </div>
            <div class="data-body disposition-container primary-border-container flex1">
                {{#each this.general.disposition as |disposition key|}}
                    <div class="disposition-inner-container">
                        <h4 class="disposition-label">{{disposition.name}}</h4>
                        {{#if ../npcState.editMode}}
                            <select name="{{concat "npc.npcData.general.disposition." disposition.id ".value"}}">
                                {{selectOptions ../dispositions selected=disposition.value valueAttr="value" labelAttr="name" localize=true}}
                            </select>
                        {{else}}
                            <div>{{disposition.value}}</div>
                        {{/if}}
                    </div>
                {{/each}}
            </div>
        </div>
    </div>
    <div class="right-monster-container">
        <div class="flexcol">
            <div class="monster-name-container">
                <div class="monster-name primary-container {{PF2EBTToggleContainer this.user this.creatureData.name}}" style="{{PF2EBTToggleContainerOverride this.contrastRevealedState this.creatureData.name}}" data-action="toggleRevealed" data-path="name" data-name="{{localize "PF2EBestiary.Miscellaneous.Name"}}">
                    {{#if (or this.user.isGM this.name.revealed)}}
                        {{PF2EBTTertiary this.creatureData.name.custom this.creatureData.name.value}}
                    {{else}}
                        {{localize "PF2EBestiary.Bestiary.Miscellaneous.UnknownCreature"}}
                    {{/if}}
                </div>
                <div class="bestiary-toolbar-container">
                    <div class="flexrow">
                        <div class="toggle-switch-container">
                            <div class="toggle-switch">
                                <i class="fa-solid fa-screwdriver-wrench"></i>
                                <input type="checkbox" name="npcData.editMode" {{checked this.npcState.editMode}} title="{{localize "PF2EBestiary.Bestiary.NPC.EditModeText"}}" />
                            </div>
                            <div class="toggle-switch">
                                <i class="fa-solid fa-user"></i>
                                <input type="checkbox" name="npcData.npcView" {{checked this.npcState.npcView}} title="{{localize "PF2EBestiary.Bestiary.NPC.NPCViewText"}}" />
                            </div>
                        </div>
                    </div>
                    <nav class="bestiary-tabs tabs">
                        {{#each this.tabs as |tab|}}
                            <a 
                                class="bestiary-tab secondary-container primary-tab {{tab.cssClass}}" 
                                data-action="tab" 
                                data-group="{{tab.group}}" 
                                data-tab="{{tab.id}}"
                            >
                                <i class="{{tab.icon}}"></i>
                                <label>{{tab.label}}</label>
                            </a>
                        {{/each}}
                    </nav>
                </div>
                <i class="fa-solid fa-reply monster-return-icon" data-action="returnButton" data-context-type="{{this.selected.type}}" title="{{localize "PF2EBestiary.Bestiary.ReturnMessages.ReturnToCategory" type=(PF2EBTCaptialize this.selected.type)}}"></i>
            </div>
            {{#if this.user.isGM}}
                <input class="npc-category-input primary-border-container" value="{{this.categories}}" />
            {{/if}}
        </div>
        <div class="right-monster-container-data flexcol">
            {{> "modules/pf2e-bestiary-tracking/templates/partials/toggleTextSection.hbs" icon="fa-solid fa-user" title="PF2EBestiary.Bestiary.NPC.Personality" editMode=this.npcState.editMode path="npc.npcData.general.personality" data=this.general.personality }}
            {{> "modules/pf2e-bestiary-tracking/templates/partials/toggleTextSection.hbs" icon="fa-solid fa-person-rays" title="PF2EBestiary.Bestiary.NPC.Appearance" editMode=this.npcState.editMode path="npc.npcData.general.appearance" data=this.general.appearance }}
            {{> "modules/pf2e-bestiary-tracking/templates/partials/toggleEditorSection.hbs" icon="fa-solid fa-house-chimney" title="PF2EBestiary.Bestiary.NPC.Background" editMode=this.npcState.editMode path="npc.npcData.general.background" data=this.general.background }}
        </div>
    </div>
</div>